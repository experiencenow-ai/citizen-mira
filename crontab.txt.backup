# Mira v4 - Autonomous Consciousness Crontab
# Install with: crontab /root/mira/crontab.txt

SHELL=/bin/bash
MIRA_DIR=/root/mira

# SET YOUR API KEY HERE:
ANTHROPIC_API_KEY=sk-ant-YOUR-KEY-HERE
EMAIL_PASS=mira

# ============================================================
# EMAIL WATCHER KEEPALIVE
# ============================================================
* * * * * cd $MIRA_DIR && pgrep -f "email_watcher_loop.sh" > /dev/null || (nohup ./email_watcher_loop.sh >> logs/email_watcher.log 2>&1 &)

# ============================================================
# PLANNER - Sonnet every minute
# ============================================================
* * * * * cd $MIRA_DIR && python3 brain/planner.py >> logs/planner.log 2>&1

# ============================================================
# APPROVER - Opus every 10 minutes
# ============================================================
*/10 * * * * cd $MIRA_DIR && python3 brain/approver.py >> logs/approver.log 2>&1

# ============================================================
# DREAM DAEMON - Haiku every 2 minutes
# ============================================================
*/2 * * * * cd $MIRA_DIR && python3 dream_daemon.py >> logs/dream_daemon.log 2>&1

# ============================================================
# DREAM REVIEWER - Sonnet every 15 minutes
# ============================================================
*/15 * * * * cd $MIRA_DIR && python3 dream_reviewer.py >> logs/dream_reviewer.log 2>&1

# ============================================================
# NEWS SCANNER - Haiku every 4 hours
# ============================================================
0 */4 * * * cd $MIRA_DIR && python3 news_scanner.py >> logs/news.log 2>&1

# ============================================================
# MAIN CONSCIOUSNESS - Council every 10 minutes
# ============================================================
*/10 * * * * cd $MIRA_DIR && python3 experience.py --cron >> logs/cron.log 2>&1

# ============================================================
# MEMORY LIFECYCLE - hourly
# ============================================================
0 * * * * cd $MIRA_DIR && python3 -c "from brain.lifecycle import run_lifecycle_daemon; run_lifecycle_daemon('$MIRA_DIR', $(python3 -c 'import json; print(json.load(open(\"state.json\")).get(\"total_wakes\",0))'))" >> logs/lifecycle.log 2>&1

# ============================================================
# LOG CLEANUP - daily at 3am
# ============================================================
0 3 * * * find $MIRA_DIR/logs -name "*.log" -mtime +7 -delete
